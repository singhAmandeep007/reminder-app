"use strict";(self.webpackChunkreminder_app=self.webpackChunkreminder_app||[]).push([[456],{9700:(e,t,r)=>{r.d(t,{x:()=>n});const n={INACTIVE:"INACTIVE",INPROGRESS:"INPROGRESS",COMPLETED:"COMPLETED",ARCHIVED:"ARCHIVED"}},9456:(e,t,r)=>{r.d(t,{Reminders:()=>le});var n=r(9458),s=r(5379),i=r(5686),a=r(5043);var o=r(9657);function c(e){let{totalSteps:t,initialStep:r=0}=e;if(r<0||r>t)throw new Error("initialStep must be within the range of totalSteps");const[n,s]=(0,a.useState)(r),i=(0,a.useCallback)((()=>{s((e=>e>=t?e:e+1))}),[t]),o=(0,a.useCallback)((()=>{s((e=>e<=0?e:e-1))}),[]),c=(0,a.useCallback)((e=>{s((r=>e>=0&&e<=t?e:r))}),[t]);return{step:n,nextStep:i,prevStep:o,setStepTo:c,isFirstStep:0===n,isLastStep:n===t}}const l="__reminder-app-IDB__";var d=r(126);function u(e,t,r){e||r(new Error("Queried before opening connection")),function(e,t){return e.objectStoreNames.contains(t)}(e,t)||r(new Error("Store ".concat(t," in ").concat(e.name," not found")))}function m(e,t,r,n,s,i){const a=e.transaction(r,t);return s&&(a.onerror=s),n&&(a.oncomplete=n),i&&(a.onabort=i),a}async function x(e){const t="undefined"!==typeof window?window.indexedDB:null;let r=e;var n;!e&&t&&(await(0,d.a0)((()=>{var e,t;return 1===(null===(e=window)||void 0===e||null===(t=e[l])||void 0===t?void 0:t.init)})),r=null===(n=window[l])||void 0===n?void 0:n.config);return new Promise(((e,n)=>{if(t&&r){const s=t.open(r.databaseName,r.version);s.onsuccess=t=>{const r=t.target.result;e(r)},s.onerror=e=>{n(e.target.error)},s.onupgradeneeded=e=>{const t=e.target.result,n=e.target.transaction;r&&r.stores&&r.stores.forEach((e=>{if(t.objectStoreNames.contains(e.name)){const t=null===n||void 0===n?void 0:n.objectStore(e.name);t&&e.indices.forEach((e=>{t.indexNames.contains(e.name)||t.createIndex(e.name,e.keyPath,e.options)}))}else{const r=t.createObjectStore(e.name,e.id);e.indices.forEach((e=>{r.createIndex(e.name,e.keyPath,e.options)}))}}))}}else n(new Error("Failed to connect to IndexedDB"))}))}function h(e){return(0,a.useMemo)((()=>{return t=e,{getByID:e=>new Promise(((r,n)=>{x().then((s=>{u(s,t,n);const i=m(s,"readonly",t,r,n).objectStore(t).get(e);i.onsuccess=e=>{r(e.target.result)},i.onerror=()=>n(i.error)})).catch(n)})),getOneByKey:(e,r)=>new Promise(((n,s)=>{x().then((i=>{u(i,t,s);const a=m(i,"readonly",t,n,s).objectStore(t).index(e).get(r);a.onsuccess=e=>{n(e.target.result)},a.onerror=()=>s(a.error)})).catch(s)})),getManyByKey:(e,r)=>new Promise(((n,s)=>{x().then((i=>{u(i,t,s);const a=m(i,"readonly",t,n,s).objectStore(t).index(e).getAll(r);a.onsuccess=e=>{n(e.target.result)},a.onerror=()=>s(a.error)})).catch(s)})),getAll:()=>new Promise(((e,r)=>{x().then((n=>{u(n,t,r);const s=m(n,"readonly",t,e,r).objectStore(t).getAll();s.onsuccess=t=>{e(t.target.result)},s.onerror=()=>r(s.error)})).catch(r)})),add:(e,r)=>new Promise(((n,s)=>{x().then((i=>{u(i,t,s);const a=m(i,"readwrite",t,n,s).objectStore(t).add(e,r);a.onsuccess=e=>{n(e.target.result)},a.onerror=()=>s(a.error)})).catch(s)})),update:(e,r)=>new Promise(((n,s)=>{x().then((i=>{u(i,t,s);const a=m(i,"readwrite",t,n,s).objectStore(t).put(e,r);a.onsuccess=e=>{n(e.target.result)},a.onerror=()=>s(a.error)})).catch(s)})),deleteByID:e=>new Promise(((r,n)=>{x().then((s=>{u(s,t,n);const i=m(s,"readwrite",t,r,n).objectStore(t).delete(e);i.onsuccess=e=>{r(e.target.result)},i.onerror=()=>n(i.error)})).catch(n)})),deleteAll:()=>new Promise(((e,r)=>{x().then((n=>{u(n,t,r);const s=m(n,"readwrite",t,e,r).objectStore(t).clear();s.onsuccess=t=>{e(t.target.result)},s.onerror=()=>r(s.error)})).catch(r)}))};var t}),[e])}const p="notificationRecords",f=async()=>{if(!("Notification"in window))return console.log("Browser does not support notifications."),!1;return"granted"===await Notification.requestPermission()},v=async(e,t)=>{await f()&&new Notification(e,t)},j={databaseName:"browser-notifications-db",version:1,stores:[{name:p,id:{keyPath:"id"},indices:[{name:"lastNotified",keyPath:"lastNotified"},{name:"notificationCount",keyPath:"notificationCount"}]}]},g=e=>{let{notifications:t,checkInterval:r=1e4}=e;if(r<1e3)throw new Error("checkInterval must be equal or greater than 1 second (1000ms)");(0,a.useEffect)((()=>{(async function(e){return new Promise((async(t,r)=>{try{const r=await x(e);window[l]={init:1,config:e},t(r)}catch(n){r(n)}}))})(j).catch((e=>console.log("IndexedDB not supported",e)))}),[]);const{add:n,getByID:s,update:i}=h(p);(0,a.useEffect)((()=>{const e=function(){const e=setInterval((()=>(async e=>{const t=(new Date).getTime();for(const l of e){var r,a;const e=await s(l.id),d=null!==(r=l.repeatTimes)&&void 0!==r?r:1,u=null!==(a=l.repeatInterval)&&void 0!==a?a:3e5;var o,c;l.dueDate.getTime()<t&&(e?d>e.notificationCount&&u<t-e.lastNotified&&(v(l.title,null!==(o=l.options)&&void 0!==o?o:{}),await i({id:l.id,lastNotified:t,notificationCount:e.notificationCount+1})):(v(l.title,null!==(c=l.options)&&void 0!==c?c:{}),await n({id:l.id,lastNotified:t,notificationCount:1})))}})(t)),r);return()=>{clearInterval(e)}}();return()=>{e()}}),[n,i,s,t,r])},N={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"};var S=r(8899),w=r(445),b=r(5711),y=r(2382),C=r(3961),k=r(3507),I=r(5937),D=r(5505),E=r(4808),T=r(9700),P=r(1360),F=r(579);const A=e=>{let{children:t,className:r,...n}=e;return(0,F.jsxs)(w.$n,{variant:"ghost",className:(0,d.cn)("gap-1 border border-accent-dark hover:bg-accent-dark hover:text-primary",r),...n,children:[(0,F.jsx)(P.A,{className:"icon"}),t]})};var O=r(6210),R=r(614);const z=e=>{let{className:t,onCancel:r,onSave:n,defaultValue:s="",testIds:i}=e;const o=(0,a.useRef)(null),c=(0,a.useCallback)((()=>{var e;null!==(e=o.current)&&void 0!==e&&e.value&&(null===n||void 0===n||n(o.current.value))}),[n]),l=(0,a.useCallback)((()=>{null===r||void 0===r||r()}),[r]);return(0,F.jsxs)("div",{className:(0,d.cn)("mt-2 flex items-center justify-between",t),children:[(0,F.jsx)(w.pd,{className:"ml-1 mr-2",defaultValue:s,ref:o,autoFocus:!0,required:!0,"data-testid":null===i||void 0===i?void 0:i.text}),(0,F.jsxs)("div",{className:"flex items-center gap-1",children:[(0,F.jsx)(w.$n,{onClick:c,size:"icon",variant:"outline","data-testid":null===i||void 0===i?void 0:i.save,className:"group",children:(0,F.jsx)(O.A,{className:"icon group-hover:text-primary"})}),(0,F.jsx)(w.$n,{onClick:l,size:"icon",variant:"outline","data-testid":null===i||void 0===i?void 0:i.cancel,className:"group",children:(0,F.jsx)(R.A,{className:"icon group-hover:text-destructive"})})]})]})};var L=r(4407);var B=r(2910),M=r(2186),$=r(6193);function V(e){const t=(0,B.F)({start:0,end:e});return["hours","minutes"].map((e=>{const r=t[e];return r&&r>0?"".concat(r).concat(e.charAt(0)):""})).filter(Boolean).join("")||"0m"}const _=e=>{var t;let{reminder:r,listName:n}=e;const s=r.dueDate&&new Date(r.dueDate)<new Date,i=(0,a.useMemo)((()=>r.focusSessions.reduce(((e,t)=>{const r=new Date(t.startTime),n=new Date(t.endTime);return e+(0,M.b)(n,r)}),0)),[r.focusSessions]);return(0,F.jsxs)("div",{className:"ml-6 mr-10 flex flex-wrap gap-2",children:[!n&&(null===(t=r.group)||void 0===t?void 0:t.name)&&(0,F.jsx)(w.Ex,{variant:"default",children:r.group.name}),r.dueDate&&(0,F.jsxs)(w.Ex,{variant:s?"destructive":"default",children:["Due: ",(0,$.GP)(new Date(r.dueDate),"PPp")]}),i>0&&(0,F.jsxs)(w.Ex,{variant:"default",children:["Time spent: ",V(i)]})]})};var G=r(4991),U=r(4830),q=r(7172);const W=()=>{const[e,t]=(0,L.a2)(),r=t.isLoading,n=t.isError,{reminder:s,focusSessionDuration:i}=X(),{id:o}=s,c=(0,a.useCallback)((async()=>{if(!s.currentFocusSession)return;const t=s.currentFocusSession;await(0,d.$F)((()=>e({id:s.id,currentFocusSession:null,focusSessions:[...s.focusSessions,t]})))}),[e,s]),{isRunning:l,elapsedTicks:u,start:m,stop:x}=function(e){let{autoStart:t=!1,interval:r=1e3,onTick:n,onFinish:s,onStart:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e<1&&console.warn("total ticks is 0");const o=(0,a.useRef)(null),[c,l]=(0,a.useState)(e),[d,u]=(0,a.useState)(t),m=e-c,x=(0,a.useCallback)((()=>{if(d)return;const t=c===e,r=0===c;u(!0),r&&l(e),(t||r)&&(null===i||void 0===i||i())}),[e,i,d,c]),h=(0,a.useCallback)((()=>{d&&(o.current&&clearTimeout(o.current),u(!1),l(e))}),[d,e]),p=(0,a.useCallback)((()=>{d&&(o.current&&clearTimeout(o.current),u(!1))}),[d]);return(0,a.useEffect)((()=>{t&&(null===i||void 0===i||i())}),[t,i]),(0,a.useEffect)((()=>{if(!d)return;const t=e-c+1;return c>0?(o.current&&clearTimeout(o.current),o.current=setTimeout((()=>{l((e=>e-1)),null===n||void 0===n||n(t)}),r)):(u(!1),null===s||void 0===s||s()),()=>{o.current&&clearTimeout(o.current)}}),[c,d,r,e,s,n]),{remainingTicks:c,elapsedTicks:m,isRunning:d,start:x,pause:p,stop:h}}(i,{onFinish:c}),h=u/i*100,p=(0,a.useCallback)((async()=>{const t=new Date,{error:r}=await(0,d.$F)((()=>e({id:o,currentFocusSession:{startTime:(new Date).toISOString(),endTime:(0,q.p)(t,i).toISOString()}})));r||m()}),[e,o,i,m]),f=(0,a.useCallback)((async()=>{if(!s.currentFocusSession)return;const t={startTime:s.currentFocusSession.startTime,endTime:(new Date).toISOString()},{error:r}=await(0,d.$F)((()=>e({id:s.id,currentFocusSession:null,focusSessions:[...s.focusSessions,t]})));r||x()}),[e,s,x]);return(0,a.useEffect)((()=>()=>{l&&f()}),[l,f]),{isLoading:r,isErrored:n,onStart:p,onStop:f,onFinish:c,isRunning:l,progress:h,elapsedDuration:u,reminder:s}},Q=e=>{let{totalSeconds:t}=e;const r=Math.floor(t/3600),n=Math.floor(t%3600/60),s=t%60;return(0,F.jsxs)("div",{className:"flex gap-2 text-sm",children:[r>0&&(0,F.jsxs)("span",{children:[r," hr"]}),n>0&&(0,F.jsxs)("span",{children:[n," min"]}),(0,F.jsxs)("span",{children:[s," sec"]})]})},H=e=>{let{progress:t,size:r=144,onStart:n,onStop:s,isRunning:i,children:a}=e;const o=(r-16)/2,c=2*Math.PI*o,l=Math.max(c-t/100*c,0);return(0,F.jsxs)("div",{className:"flex flex-col items-center gap-4 ",children:[(0,F.jsxs)("div",{className:"relative",style:{width:r,height:r},children:[(0,F.jsxs)("svg",{width:r,height:r,children:[(0,F.jsx)("circle",{className:"stroke-muted",fill:"none",strokeWidth:16,r:o,cx:r/2,cy:r/2}),(0,F.jsx)("circle",{className:"stroke-primary",fill:"none",strokeWidth:16,r:o,cx:r/2,cy:r/2,style:{strokeDasharray:c,strokeDashoffset:l,strokeLinecap:"round",transform:"rotate(-90deg)",transformOrigin:"50% 50%"}})]}),(0,F.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:a})]}),(0,F.jsx)(w.$n,{onClick:i?s:n,className:" h-max rounded-full p-3",children:i?(0,F.jsx)(G.A,{size:16,className:"!pointer-events-none fill-current"}):(0,F.jsx)(U.A,{size:16,className:"!pointer-events-none fill-current"})})]})},K=[()=>{const e=(0,a.useRef)(0),t=(0,a.useRef)(1),{nextStep:r,setFocusSessionDuration:n}=X();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(w.c7,{children:[(0,F.jsx)(w.L3,{className:"text-left",children:"Ready, set, focus!"}),(0,F.jsx)(w.rr,{className:"max-w-xs text-left",children:"Set duration of your focus session"})]}),(0,F.jsxs)("div",{className:"flex flex-col ",children:[(0,F.jsxs)("div",{className:"mb-4 flex items-center justify-center gap-4",children:[(0,F.jsx)(w.Bc,{initialValue:e.current,onChange:t=>e.current=t,max:12,children:(0,F.jsx)("span",{className:"text-sm",children:"hours"})}),(0,F.jsx)(w.Bc,{initialValue:t.current,onChange:e=>t.current=e,min:1,max:59,children:(0,F.jsx)("span",{className:"text-sm",children:"minutes"})})]}),(0,F.jsx)(w.$n,{onClick:()=>{const s=e.current,i=t.current;n(60*s*60+60*i),r()},className:"self-end",size:"full",autoFocus:!0,children:"Next"})]})]})},()=>{const{isRunning:e,progress:t,onStart:r,onStop:n,elapsedDuration:s,reminder:i}=W();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(w.c7,{children:[(0,F.jsx)(w.L3,{className:"text-left",children:"Ready, set, focus!"}),(0,F.jsxs)(w.rr,{className:"max-w-xs text-left",children:["\ud83c\udfaf ",(0,d.EJ)(i.title,{maxLength:100})]})]}),(0,F.jsx)("div",{className:"flex flex-col items-center justify-center gap-2",children:(0,F.jsx)(H,{isRunning:e,progress:t,onStart:r,onStop:n,size:240,children:(0,F.jsx)(Q,{totalSeconds:s})})})]})}],Z=K.length,J=(0,a.createContext)(null),Y=e=>{let{children:t,reminder:r}=e;const[n,s]=(0,a.useState)(0);return(0,F.jsx)(J.Provider,{value:{focusSessionDuration:n,setFocusSessionDuration:s,reminder:r,...c({totalSteps:Z})},children:t})},X=()=>{const e=(0,a.useContext)(J);if(!e)throw new Error("useFocusSessionWizardContext must be used within a FocusSessionWizardProvider");return e},ee=()=>{const{step:e}=X(),t=K[e];return(0,F.jsx)(t,{})},te=e=>{let{reminder:t}=e;return(0,F.jsx)(Y,{reminder:t,children:(0,F.jsx)(ee,{})})},re="DUE_DATE",ne="FOCUS_SESSION",se=e=>{let{reminder:t,listName:r}=e;const[n,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[c,l]=(0,a.useState)(null),u=(0,a.useRef)(t.repeatTimes||1),m=(0,a.useRef)((t.repeatInterval||3e5).toString()),{handleOnDelete:x,handleOnUpdate:h,isLoading:p}=(e=>{let{reminder:t}=e;const[r,n]=(0,L.Qs)(),[s,i]=(0,L.a2)();return{isLoading:n.isLoading||i.isLoading,isErrored:n.isError||i.isError,handleOnDelete:(0,a.useCallback)((async e=>{await(0,d.$F)((()=>r(e)))}),[r]),handleOnUpdate:(0,a.useCallback)((async e=>{await(0,d.$F)((()=>s({id:e.id,groupId:e.groupId,title:e.title,state:e.state,isPinned:e.isPinned,dueDate:e.dueDate,repeatTimes:e.repeatTimes,repeatInterval:e.repeatInterval})))}),[s])}})({reminder:t}),f=p,v=t.state===T.x.COMPLETED;return(0,F.jsxs)("div",{className:"flex flex-col py-2","data-testid":"reminder-item-".concat(t.title),children:[i&&(0,F.jsx)(z,{className:"flex-1",defaultValue:t.title,onCancel:()=>o(!1),onSave:e=>{h({id:t.id,title:e}),o(!1)},testIds:{cancel:"reminder-update-cancel",save:"reminder-update-save",text:"reminder-update-text"}}),!i&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,F.jsx)(w.Sc,{checked:v,className:"peer",onClick:()=>h({id:t.id,state:v?T.x.INACTIVE:T.x.COMPLETED}),"data-testid":"reminder-item-checkbox"}),(0,F.jsx)(w.o5,{variant:"p",affects:"withoutPMargin",className:(0,d.cn)("flex-1 overflow-x-scroll text-nowrap py-2 peer-aria-[checked=true]:text-muted-foreground peer-aria-[checked=true]:line-through"),children:t.title}),(0,F.jsxs)(w.lG,{children:[(0,F.jsxs)(w.rI,{open:n,onOpenChange:s,modal:!1,children:[(0,F.jsx)(w.ty,{asChild:!0,children:(0,F.jsx)(w.$n,{variant:"outline",size:"icon","data-testid":"reminder-item-menu-btn",disabled:f,children:n?(0,F.jsx)(b.A,{className:"icon"}):(0,F.jsx)(y.A,{className:"icon"})})}),(0,F.jsxs)(w.SQ,{className:"min-w-min",align:"end",onInteractOutside:()=>s(!1),"data-testid":"reminder-item-menu",children:[(0,F.jsx)(w._2,{"data-testid":"reminder-item-menuitem-pin",onClick:()=>h({id:t.id,isPinned:!t.isPinned}),className:(0,d.cn)("group",{"bg-primary text-secondary":t.isPinned}),disabled:v,children:(0,F.jsx)(C.A,{size:20,className:(0,d.cn)("group-hover:text-primary"),role:"button"})}),(0,F.jsx)(w.mB,{}),(0,F.jsx)(w.zM,{asChild:!0,onClick:()=>{l(ne)},children:(0,F.jsx)(w._2,{className:(0,d.cn)("group"),disabled:v,"data-testid":"reminder-item-menuitem-focus-session",children:(0,F.jsx)(k.A,{size:20,className:(0,d.cn)("group-hover:text-primary"),role:"button"})})}),(0,F.jsx)(w.mB,{}),(0,F.jsx)(w.zM,{asChild:!0,onClick:()=>{l(re)},children:(0,F.jsx)(w._2,{className:"group",disabled:v,"data-testid":"reminder-item-menuitem-due-date",children:(0,F.jsx)(I.A,{size:20,className:"group-hover:text-primary",role:"button"})})}),(0,F.jsx)(w.mB,{}),(0,F.jsx)(w._2,{"data-testid":"reminder-item-menuitem-edit",onClick:()=>o(!0),className:"group",disabled:v,children:(0,F.jsx)(D.A,{size:20,className:"group-hover:text-primary",role:"button"})}),(0,F.jsx)(w.mB,{}),(0,F.jsx)(w._2,{"data-testid":"reminder-item-menuitem-delete",onClick:()=>x(t.id),className:"group",children:(0,F.jsx)(E.A,{size:20,className:"group-hover:text-destructive",role:"button"})})]})]}),(0,F.jsxs)(w.Cf,{className:"w-max","data-testid":"reminder-item-dialog",children:[c===re&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(w.c7,{children:[(0,F.jsx)(w.L3,{className:"text-left",children:"Schedule your reminder"}),(0,F.jsx)(w.rr,{className:"text-left",children:"Select reminder's due date and time"})]}),(0,F.jsx)(w.K7,{isLoading:p,date:t.dueDate?new Date(t.dueDate):void 0,children:e=>{let{selectedDateTime:r}=e;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsx)(w.Bc,{initialValue:u.current,onChange:e=>u.current=e,max:100,min:1,classNames:{container:"",value:"text-xl",controls:"h-7 w-7"},children:(0,F.jsx)("span",{className:"text-xs",children:"Repeat Times"})}),(0,F.jsxs)(w.l6,{defaultValue:m.current,onValueChange:e=>{m.current=e},children:[(0,F.jsx)(w.bq,{className:" flex-1 self-center",children:(0,F.jsx)(w.yv,{placeholder:"Select an interval"})}),(0,F.jsx)(w.gC,{className:"bg-background",children:(0,F.jsxs)(w.s3,{children:[(0,F.jsx)(w.eb,{value:"300000",children:"5 min"}),(0,F.jsx)(w.eb,{value:"600000",children:"10 min"}),(0,F.jsx)(w.eb,{value:"900000",children:"15 min"}),(0,F.jsx)(w.eb,{value:"1800000",children:"30 min"})]})})]})]}),(0,F.jsx)(w.HM,{asChild:!0,children:(0,F.jsx)(w.$n,{size:"full",onClick:()=>{if(r){const e=r.toISOString();h({id:t.id,dueDate:e,repeatTimes:u.current,repeatInterval:Number(m.current)})}},className:(0,d.cn)(p&&"cursor-not-allowed"),disabled:!r||p,"data-testid":"reminder-item-save-due-date-btn",children:"Save"})})]})}})]}),c===ne&&(0,F.jsx)(te,{reminder:t})]})]})]}),!v&&(0,F.jsx)(_,{reminder:t,listName:r})]})]})};var ie=r(6328);const ae=()=>{const{reminders:e,refetchReminders:t,reminderGroup:r,handleOnSave:n}=(()=>{const e=(0,L.S9)(),t=(0,L.z5)(e),r=(0,L.n)(e.groupId,{skip:!e.groupId}),[n,s]=(0,L.Lp)(),i=(0,a.useCallback)((async e=>{await(0,d.$F)((()=>n({groupId:e.groupId,title:e.title})))}),[n]);return r.isError&&ie.oR.error("Error fetching reminder group"),t.isError&&ie.oR.error("Error fetching reminders"),s.isError&&ie.oR.error("Error creating reminder"),{reminders:t.currentData,reminderGroup:r.currentData,refetchReminders:t.refetch,handleOnSave:i}})();(e=>{let{reminders:t=[]}=e;const r=(0,a.useMemo)((()=>(t||[]).filter((e=>e.dueDate)).map((e=>({id:e.id,title:"\ud83d\udd14",dueDate:new Date(e.dueDate),repeatInterval:e.repeatInterval,repeatTimes:e.repeatTimes,options:{body:"".concat(e.title)}})))),[t]);g({notifications:r})})({reminders:e});const[s,i]=(0,a.useState)(!1);return(0,F.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden p-4",children:[(0,F.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-2",children:[(0,F.jsx)(w.o5,{variant:"h4",className:"flex items-center justify-between overflow-x-scroll text-nowrap py-2 ","data-testid":"reminder-list-title",children:(null===r||void 0===r?void 0:r.name)||"All"}),(0,F.jsxs)("div",{className:"flex gap-2",children:[(0,F.jsx)(w.$n,{size:"icon",variant:"ghost",className:"hover:text-primary","data-testid":"reminder-refetch-btn",children:(0,F.jsx)(S.A,{className:"icon",onClick:t})}),(0,F.jsx)(A,{size:"icon",onClick:()=>i((e=>!e)),disabled:s,"data-testid":"reminder-create-btn"})]})]}),e&&(0,F.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,F.jsx)("ul",{className:"divide divide-y",children:null===e||void 0===e?void 0:e.slice().sort(((e,t)=>e.isPinned?-1:t.isPinned?1:0)).map((e=>(0,F.jsx)("li",{children:(0,F.jsx)(se,{reminder:e,listName:null===r||void 0===r?void 0:r.name})},e.id)))})}),s&&(0,F.jsx)(z,{onCancel:()=>i(!1),onSave:e=>{n({title:e,groupId:null===r||void 0===r?void 0:r.id}),i(!1)},testIds:{cancel:"reminder-item-create-cancel",save:"reminder-item-create-save",text:"reminder-item-create-text"}})]})},oe=e=>{let{reminderGroup:t}=e;const[r,n]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),{handleOnDelete:o,handleOnItemClick:c,handleOnSave:l,isLoading:u,isSelected:m}=(e=>{let{reminderGroup:t}=e;const{groupId:r}=(0,L.GV)(L.hk),n=r===(null===t||void 0===t?void 0:t.id),[s,i]=(0,L.dP)(),[o,c]=(0,L.FG)(),l=(0,L.jL)();return{isSelected:n,isLoading:i.isLoading||c.isLoading,isErrored:i.isError||c.isError,handleOnItemClick:(0,a.useCallback)((e=>{l((0,L.dR)(e))}),[l]),handleOnDelete:(0,a.useCallback)((async e=>{await(0,d.$F)((()=>s(e)))}),[s]),handleOnSave:(0,a.useCallback)((async e=>{await(0,d.$F)((()=>o({id:e.id,name:e.name})))}),[o])}})({reminderGroup:t}),x=u,h=(0,a.useMemo)((()=>t&&s?(0,F.jsx)(z,{className:"flex-1",defaultValue:t.name,onCancel:()=>i(!1),onSave:e=>{l({id:t.id,name:e}),i(!1)},testIds:{cancel:"reminder-group-item-update-cancel-".concat(t.id),save:"reminder-group-item-update-save-".concat(t.id)}}):(0,F.jsx)(w.o5,{variant:"p",className:(0,d.cn)("flex-1 cursor-pointer overflow-x-scroll text-nowrap py-2",m&&"text-primary"),onClick:()=>c({groupId:t?t.id:void 0}),children:t?t.name:"All"})),[m,c,s,t,l]);return(0,F.jsxs)("div",{className:(0,d.cn)("flex cursor-pointer items-center justify-between gap-2 px-1 py-2"),"data-testid":"reminder-group-item-".concat(t?t.name:"all"),children:[h,t&&!s&&(0,F.jsxs)(w.rI,{open:r,onOpenChange:n,children:[(0,F.jsx)(w.ty,{asChild:!0,children:(0,F.jsx)(w.$n,{variant:"outline",size:"icon","data-testid":"reminder-group-item-menu-btn",disabled:x,children:r?(0,F.jsx)(b.A,{className:"icon"}):(0,F.jsx)(y.A,{className:"icon"})})}),(0,F.jsxs)(w.SQ,{align:"end",onInteractOutside:()=>n(!1),className:"min-w-min","data-testid":"reminder-group-item-menu",children:[(0,F.jsx)(w._2,{onClick:()=>i(!0),"data-testid":"reminder-group-item-update-".concat(t.name),className:"group",children:(0,F.jsx)(D.A,{size:20,className:"group-hover:text-primary",role:"button"})}),(0,F.jsx)(w.mB,{}),(0,F.jsx)(w._2,{onClick:()=>o(t.id),"data-testid":"reminder-group-item-delete-".concat(t.name),className:"group",children:(0,F.jsx)(E.A,{size:20,className:"group-hover:text-destructive",role:"button"})})]})]})]})},ce=()=>{const[e,t]=(0,a.useState)(!1),{handleOnSave:r,reminderGroups:n}=(()=>{const e=(0,L.kI)(),[t,r]=(0,L.E2)(),n=(0,a.useCallback)((async e=>{await(0,d.$F)((()=>t({name:e.name})))}),[t]);return r.isError&&ie.oR.error("Error creating reminder group"),e.isError&&ie.oR.error("Error fetching reminder groups"),{reminderGroups:e.data,handleOnSave:n}})();return(0,F.jsxs)("div",{className:"flex min-w-[200px] flex-1 flex-col overflow-hidden p-4",children:[(0,F.jsx)("div",{className:"mb-2 mt-1 flex justify-center",children:(0,F.jsx)(A,{size:"full",onClick:()=>t((e=>!e)),disabled:e,"data-testid":"reminder-group-create-btn",children:"Add List"})}),n&&(0,F.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,F.jsxs)("ul",{className:"divide divide-y divide-accent-dark",children:[(0,F.jsx)("li",{children:(0,F.jsx)(oe,{})},"all"),n&&n.map((e=>(0,F.jsx)("li",{children:(0,F.jsx)(oe,{reminderGroup:e})},e.id)))]})}),e&&(0,F.jsx)(z,{onCancel:()=>t(!1),onSave:e=>{r({name:e}),t(!1)},testIds:{cancel:"reminder-group-create-cancel",save:"reminder-group-create-save",text:"reminder-group-create-text"}})]})},le=()=>{const{isBelowMd:e}=function(e,t){const r=t[e],n=(0,o.Ub)({query:"(max-width: ".concat(r,")")}),s=e[0].toUpperCase()+e.substring(1);return{[e]:Number(String(r).replace(/[^0-9]/g,"")),["isAbove".concat(s)]:!n,["isBelow".concat(s)]:n}}("md",N);return(0,F.jsx)("div",{className:"mx-auto h-full max-w-screen-lg p-2 md:p-8","data-testid":"reminders",children:(0,F.jsx)("div",{className:"flex h-full flex-col rounded border-2 border-primary shadow-lg lg:h-3/4",children:(0,F.jsxs)(n.YZ,{direction:e?"vertical":"horizontal",className:"flex-1",autoSaveId:"reminders-panel-group",children:[(0,F.jsx)(n.Zk,{maxSize:50,className:"flex flex-col",children:(0,F.jsx)(ce,{})}),(0,F.jsx)(n.TW,{className:"group",children:(0,F.jsx)("div",{className:(0,d.cn)("flex h-full w-full items-center border-primary group-hover:bg-secondary group-hover:text-primary",e?"border-b-2":"border-r-2"),children:e?(0,F.jsx)(s.A,{className:"icon mx-auto"}):(0,F.jsx)(i.A,{className:"icon mx-auto"})})}),(0,F.jsx)(n.Zk,{className:"flex flex-col",children:(0,F.jsx)(ae,{})})]})})})}}}]);
//# sourceMappingURL=456.6f457e93.chunk.js.map